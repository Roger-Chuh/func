function testPnP()
%cam0
focCurr = [ 2.3547617158286690e+02, 2.3526372005177839e+02]';
cenCurr = [3.2472644179389050e+02, 2.3990800782959425e+02]';

%cam3
focCurr = [2.3597308940007338e+02,2.3585455726159756e+02]';
cenCurr = [3.2502610238088982e+02,2.3875007634730215e+02]';


intrMat = eye(3);
intrMat(1,1) = focCurr(1);
intrMat(2,2) = focCurr(2);
intrMat(1,3) = cenCurr(1);
intrMat(2,3) = cenCurr(1);


alphaCurr = 0;
kcCurr = zeros(5,1);

gridHomo = [ 0 0.13    0
 0.1 0.13    0
0.13 0.13    0
0.23 0.13    0
0.26 0.13    0
0.36 0.13    0
0.39 0.13    0
0.49 0.13    0
0.52 0.13    0
0.62 0.13    0
0.65 0.13    0
0.75 0.13    0
   0 0.23    0
 0.1 0.23    0
0.13 0.23    0
0.23 0.23    0
0.26 0.23    0
0.36 0.23    0
0.39 0.23    0
0.49 0.23    0
0.52 0.23    0
0.62 0.23    0
0.65 0.23    0
0.75 0.23    0
   0 0.26    0
 0.1 0.26    0
0.13 0.26    0
0.23 0.26    0
0.26 0.26    0
0.36 0.26    0
0.39 0.26    0
0.49 0.26    0
0.52 0.26    0
0.62 0.26    0
0.65 0.26    0
0.75 0.26    0
   0 0.36    0
 0.1 0.36    0
0.13 0.36    0
0.23 0.36    0
0.26 0.36    0
0.36 0.36    0
0.39 0.36    0
0.49 0.36    0
0.52 0.36    0
0.62 0.36    0
0.65 0.36    0
0.75 0.36    0
   0 0.39    0
 0.1 0.39    0
0.13 0.39    0
0.23 0.39    0
0.26 0.39    0
0.36 0.39    0
0.39 0.39    0
0.49 0.39    0
0.52 0.39    0
0.62 0.39    0
   0 0.49    0
 0.1 0.49    0
0.13 0.49    0
0.23 0.49    0
0.26 0.49    0
0.36 0.49    0
0.39 0.49    0
0.49 0.49    0
0.52 0.49    0
0.62 0.49    0
   0 0.52    0
 0.1 0.52    0
0.13 0.52    0
0.23 0.52    0
0.26 0.52    0
0.36 0.52    0
0.39 0.52    0
0.49 0.52    0
0.52 0.52    0
0.62 0.52    0
   0 0.62    0
 0.1 0.62    0
0.13 0.62    0
0.23 0.62    0
0.26 0.62    0
0.36 0.62    0
0.39 0.62    0
0.49 0.62    0
0.52 0.62    0
0.62 0.62    0
   0 0.65    0
 0.1 0.65    0
0.13 0.65    0
0.23 0.65    0
0.26 0.65    0
0.36 0.65    0
0.39 0.65    0
0.49 0.65    0
0.52 0.65    0
0.62 0.65    0
   0 0.75    0
 0.1 0.75    0
0.13 0.75    0
0.23 0.75    0
0.26 0.75    0
0.36 0.75    0
0.39 0.75    0
0.49 0.75    0
0.52 0.75    0
0.62 0.75    0]';
pt2d = [ -149.48  219.882
-195.944  260.433
-211.814  274.362
-278.154  331.206
-300.689  351.211
-398.961  436.616
-434.466  467.904
-597.833  609.676
-660.486  665.022
-1002.54  954.392
-1142.05   1077.7
-1324.51  1381.93
-63.4428  233.153
-94.3879  269.864
 -105.34  282.293
-146.573  331.214
-161.428   348.41
-219.709  417.005
-240.783  441.849
-327.225  544.792
-361.353  584.183
-506.349  756.886
-570.095  829.693
 -874.93  1187.59
-41.8445  236.767
-69.3441  272.175
-78.4411  284.204
-114.537  331.166
-127.981  347.508
-177.996  412.491
-195.968    435.2
-270.162  531.391
-297.486   566.84
 -416.94  721.477
-465.029  782.966
-701.601  1085.34
 21.3877  246.316
 2.87126   278.72
-3.41526  289.663
-26.9006   331.02
-35.2954  345.128
 -66.564  400.047
-77.7095  419.284
-120.931  495.608
 -136.35  522.618
-201.899  636.772
-225.428  677.958
-331.688  863.551
 37.6392  249.039
 21.3758  280.565
 15.9393   291.04
-4.89706  330.998
-12.0396  344.659
-39.1279   396.96
-49.1371   415.26
-85.9213  486.772
-99.1297  512.543
-153.906  616.979
 85.8324  256.501
 75.0863   285.48
 71.4649  295.036
 57.9791  330.974
 53.5123  343.068
 36.5459  388.576
 30.5661  404.213
 8.16951   464.36
0.412368  485.082
-30.4565  567.772
 98.5251  258.487
 89.0491  286.856
 85.8737  296.036
 74.3702   330.86
 70.4493  342.416
  55.684  386.519
 50.6133  401.285
 31.4333  458.656
 24.5542  478.403
-1.64617  556.247
 136.346  264.267
 130.577    290.5
 128.616  299.228
   121.5  330.863
 119.252  341.265
 110.503  380.339
 107.615  393.438
 96.4961   442.85
 92.5018  459.741
 77.7598  524.285
  146.53  265.919
 141.594  291.561
 139.836  299.964
 133.918  330.819
 132.082  340.883
 124.568  378.727
 122.058  391.394
 112.818  438.706
 109.812  454.777
 97.6406  516.418
 177.226  270.628
 174.648  294.537
 173.712  302.342
 170.663  330.829
 169.576  340.044
 166.165  374.117
  164.59  385.318
 160.177  427.335
 158.588  441.362
 152.847  494.047]';
[r, t] = compute_extrinsic_init(pt2d,gridHomo,focCurr,cenCurr,kcCurr,alphaCurr);
[r, t, ~, jacMat] = compute_extrinsic_refine(r, t, pt2d, gridHomo, focCurr,cenCurr,kcCurr,alphaCurr,20,condTh);
r
t
figure,imshow(zeros(480,640));hold on;plot(pt2d(1,:),pt2d(2,:),'-or')
pt2d_ = TransformAndProject(gridHomo', intrMat, rodrigues(r),t);
err = pt2d' - pt2d_;
end